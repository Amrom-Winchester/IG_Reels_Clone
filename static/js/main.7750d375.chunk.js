(this.webpackJsonpreels=this.webpackJsonpreels||[]).push([[0],{104:function(e,s,c){},106:function(e,s,c){"use strict";c.r(s);var t=c(6),n=c(72),a=c.n(n),r=c(51),o=c(15),i=(c(92),c(93),c(0)),l=c.n(i),d=c(2),j=c(126),u=(c(95),c(124)),b=c(76),p=c.n(b),O=c(73),h=c(69),m=c.n(h),v=c(77),x=c.n(v),f=c(70),g=c.n(f),k=c(78),N=c.n(k),w=c(79),_=c.n(w),y=c(45);c(108),c(99),c(107),new y.a.auth.GoogleAuthProvider;y.a.initializeApp({apiKey:"AIzaSyD-2JCkrvjjDsn5ChPel02kk7pQWlqc9vA",authDomain:"ig-reels-clone-755ca.firebaseapp.com",projectId:"ig-reels-clone-755ca",storageBucket:"ig-reels-clone-755ca.appspot.com",messagingSenderId:"466706368812",appId:"1:466706368812:web:be51bf285ab51aec5a0489"});y.a.auth();var F=y.a.firestore(),R=y.a.storage(),S=F,A=c(10);var C=function(e){var s=e.username,c=e.imgsrc,n=e.song,a=e.likes,r=e.shares,i=e.id,b=Object(t.useState)(a),h=Object(o.a)(b,2),v=h[0],f=h[1],k=Object(t.useState)(null),w=Object(o.a)(k,2),y=w[0],F=w[1];return Object(t.useEffect)(Object(d.a)(l.a.mark((function e(){var s,c,t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=S.collection("Reels").doc(i),e.next=3,s.get();case 3:c=e.sent,(t=c.data()).liked?F(!0):(t.liked=!1,F(!1)),console.log(t);case 7:case"end":return e.stop()}}),e)}))),v),Object(A.jsxs)("div",{className:"videoFooter",children:[Object(A.jsxs)("div",{className:"innerVFooter",children:[Object(A.jsx)(j.a,{src:c}),Object(A.jsxs)("h3",{children:[s," \u2022",Object(A.jsx)(u.a,{children:"Follow"})]})]}),Object(A.jsxs)("div",{className:"vF_Ticker",children:[Object(A.jsx)(p.a,{className:"vF_icon"}),Object(A.jsx)(O.a,{mode:"smooth",children:function(e){e.index;return Object(A.jsx)(A.Fragment,{children:Object(A.jsx)("h1",{children:n})})}})]}),Object(A.jsxs)("div",{className:"videoFooter_Actions",children:[Object(A.jsxs)("div",{className:"vF_ActionsLeft",children:[y?Object(A.jsx)(m.a,{onClick:function(){var e=Object(d.a)(l.a.mark((function e(s){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=y){e.next=7;break}return F(!1),e.next=4,S.collection("Reels").doc(i).update({liked:!1});case 4:f(v-1),e.next=11;break;case 7:return F(!0),e.next=10,S.collection("Reels").doc(i).update({liked:!0});case 10:f(v+1);case 11:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()}):Object(A.jsx)(x.a,{onClick:function(){var e=Object(d.a)(l.a.mark((function e(s){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(1!=y){e.next=7;break}return F(!1),e.next=4,S.collection("Reels").doc(i).update({liked:!1});case 4:f(v-1),e.next=11;break;case 7:return F(!0),e.next=10,S.collection("Reels").doc(i).update({liked:!0});case 10:f(v+1);case 11:case"end":return e.stop()}}),e)})));return function(s){return e.apply(this,arguments)}}()}),Object(A.jsx)(g.a,{}),Object(A.jsx)(N.a,{}),Object(A.jsx)(_.a,{})]}),Object(A.jsxs)("div",{className:"vF_ActionsRight",children:[Object(A.jsxs)("div",{className:"vFActionsStats",children:[Object(A.jsx)(m.a,{}),Object(A.jsx)("p",{children:v})]}),Object(A.jsxs)("div",{className:"vFActionsStats",children:[Object(A.jsx)(g.a,{}),Object(A.jsx)("p",{children:r})]})]})]})]})},I=(c(104),c(80)),D=c.n(I),z=c(81),E=c.n(z);var J=function(){return Object(A.jsxs)("div",{className:"videoHeader",children:[Object(A.jsx)(D.a,{}),Object(A.jsx)("h3",{children:"Reels"}),Object(A.jsx)(E.a,{})]})};var P=function(e){var s=e.url,c=e.likes,n=e.shares,a=e.username,r=e.imgsrc,i=e.song,l=e.id,d=Object(t.useState)(!1),j=Object(o.a)(d,2),u=j[0],b=j[1],p=Object(t.useRef)(null);return Object(A.jsxs)("div",{className:"videoCard",children:[Object(A.jsx)(J,{}),Object(A.jsx)("video",{ref:p,onClick:function(){u?(p.current.pause(),b(!1)):(p.current.play(),b(!0))},className:"videoCard_player",src:s,alt:"",loop:!0}),Object(A.jsx)(C,{username:a,song:i,likes:c,imgsrc:r,shares:n,id:l})]})},T=c(82),B=c.n(T);var G=function(){var e=Object(t.useState)([]),s=Object(o.a)(e,2),c=s[0],n=s[1],a=Object(t.useState)([]),i=Object(o.a)(a,2),l=i[0],d=i[1];return Object(t.useEffect)((function(){F.collection("Reels").onSnapshot((function(e){for(var s=e.docs,c=[],t=0;t<s.length;t++)c.push(Object(r.a)({id:s[t].id},s[t].data()));d(c)})),console.log(l),F.collection("IG-User").onSnapshot((function(e){n(e.docs.map((function(e){return e.data()})))}))}),[]),console.log(c),console.log(l),Object(A.jsxs)("div",{className:"App",children:[Object(A.jsx)("div",{className:"app_top",children:Object(A.jsx)("img",{className:"app_logo",src:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e7/Instagram_logo_2016.svg/1200px-Instagram_logo_2016.svg.png"})}),Object(A.jsx)("input",{type:"file",onClick:function(e){e.currentTarget.value=null},onChange:function(e){var s=e.currentTarget.files[0],t=s.name,n=s.size,a=s.type;if((n/=1e6)>10)alert("File size exceeds 10mb");else{var r=t.split("_")[1];if("video"==(a=a.split("/")[0])){console.log(s);var o=c[0];console.log(o.id),console.log(r);var i=R.ref("Reels/".concat(o.id,"/").concat(Date.now()+"-"+t)).put(s);console.log(i),i.on("state-changed",null,null,(function(){i.snapshot.ref.getDownloadURL().then((function(e){console.log(e),console.log(o.displayName),console.log(o.imgsrc);F.collection("Reels").add({displayname:o.displayName,imgsrc:o.imgsrc,url:e,likes:0,shares:0,song:r})}))}))}else alert("Please upload a video file")}}}),Object(A.jsx)("div",{className:"upload",children:Object(A.jsx)(B.a,{})}),Object(A.jsx)("div",{className:"app_videos",children:l.map((function(e){var s=e.username,c=e.imgsrc,t=e.song,n=e.url,a=e.likes,r=e.shares,o=e.id;return Object(A.jsx)(P,{username:s,imgsrc:c,song:t,url:n,likes:a,shares:r,id:o})}))})]})};a.a.render(Object(A.jsx)(G,{}),document.getElementById("root"))},92:function(e,s,c){},93:function(e,s,c){},95:function(e,s,c){}},[[106,1,2]]]);
//# sourceMappingURL=main.7750d375.chunk.js.map